(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),l=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),p=l(n),u=a,d=p["".concat(i,".").concat(u)]||p[u]||h[u]||o;return n?r.a.createElement(d,s(s({ref:t},c),{},{components:n})):r.a.createElement(d,s({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var b in t)hasOwnProperty.call(t,b)&&(s[b]=t[b]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},82:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return l}));var a=n(1),r=n(6),o=(n(0),n(100)),i={title:"Fbt promoted to v1.0.0",author:"David Han-Sze-Chuen",authorURL:"https://github.com/kayhadrin",authorFBID:588638551},s={permalink:"/fbt/blog/2022/04/12/blog-post",source:"@site/blog/2022-04-12-blog-post.md",description:'"We reached adulthood yeah!" \ud83e\udd73\ud83e\udd42\ud83c\udf7a\ud83c\udf89',date:"2022-04-12T00:00:00.000Z",tags:[],title:"Fbt promoted to v1.0.0",readingTime:3.46,truncated:!1,nextItem:{title:"What does FBT mean?",permalink:"/fbt/blog/2018/02/14/blog-post"}},b=[{value:"What&#39;s changed?",id:"whats-changed",children:[{value:"Major features",id:"major-features",children:[]},{value:"Minor features",id:"minor-features",children:[]}]},{value:"Acknowledgments",id:"acknowledgments",children:[]}],c={rightToc:b};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},'"We reached adulthood yeah!" \ud83e\udd73\ud83e\udd42\ud83c\udf7a\ud83c\udf89')),Object(o.b)("p",null,"For a bit more than two years, we've been working on a major refactor of the JS Fbt library. This project went through 600+ internal code reviews and helped identify multiple thousands of strings on the facebook.com domain that would benefit from being retranslated.\nOn January 26th 2022, we deployed it on facebook.com and, a month later, on the React Native views of our Facebook mobile app for both Android and iOS platforms. Enough time has elapsed to consider this release stable."),Object(o.b)("p",null,"This new version significantly improves the accuracy of the strings extracted from our JS codebase on www and RN; thus giving a better opportunity for translators to produce quality translations."),Object(o.b)("p",null,"We're now ready to release it as v1.0.0 of the JS Fbt library!"),Object(o.b)("h2",{id:"whats-changed"},"What's changed?"),Object(o.b)("h3",{id:"major-features"},"Major features"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"\ud83d\udea8 BREAKING CHANGE:")," due to the below major changes, the ",Object(o.b)("inlineCode",{parentName:"p"},"fbt-collect")," script may extract new strings that will need to be retranslated.\nPlease see ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/fbt/tree/main/auto-param-new-string-helper"}),"this page for more information on how to upgrade.")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},'Strings that contain nested React elements ("Rich content fbt strings") will now produce more accurate string descriptions.')," ",Object(o.b)("br",null)),Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Why?")," ",Object(o.b)("br",null),'\nWhile the legacy version of the fbt library was already able to do "auto paramterization", it was quite buggy and contributed to generate non-sensical strings - causing translation quality issues since translators would lack the necessary textual context to do their work.'),Object(o.b)("p",{parentName:"li"},"E.g. An extracted string may appear as ",Object(o.b)("inlineCode",{parentName:"p"},'"{=} uploaded {=one photo} that you haven\'t seen yet."'),"\nWho or what is ",Object(o.b)("inlineCode",{parentName:"p"},"{=}"),"? What about the plural case when there are many photos?"),Object(o.b)("p",{parentName:"li"},"The legacy algorithm to generate descriptions for our nested fbt strings was sometimes missing key words and wasn't able to track string variations issued from special fbt constructs like ",Object(o.b)("inlineCode",{parentName:"p"},"<fbt:pronoun>")," (e.g. ",Object(o.b)("inlineCode",{parentName:"p"},"he"),"/",Object(o.b)("inlineCode",{parentName:"p"},"she"),"/",Object(o.b)("inlineCode",{parentName:"p"},"they"),")."),Object(o.b)("p",{parentName:"li"},"At the scale of Facebook's website, we identified several thousands of strings that could be improved from this major fbt update."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"\ud83d\udcd6 ",Object(o.b)("strong",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"strong"},{href:"/fbt/docs/autoparam"}),"Learn more about Auto Parameterization"))))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Fixed handling of whitespace characters.")," ",Object(o.b)("br",null)),Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Why?")," ",Object(o.b)("br",null),"\nIn the legacy Fbt library version, we noticed that whitespace characters (i.e. ",Object(o.b)("inlineCode",{parentName:"p"},"&nbsp;")," characters) were silently dropped from text and descriptions.\nUsing them is sometimes necessary for UI layout purposes so we've ensure that they're now correctly preserved."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"\u26a0\ufe0f You should still ensure that translators are aware of their presence so that they can also preserve them in their translations.")))),Object(o.b)("h3",{id:"minor-features"},"Minor features"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("strong",{parentName:"li"},"Added ability to write plain-text only fbt strings with the ",Object(o.b)("a",Object(a.a)({parentName:"strong"},{href:"/fbt/docs/enforcing_plain_text"}),Object(o.b)("inlineCode",{parentName:"a"},"fbs")," API"))," ",Object(o.b)("br",null),"\nSometimes, we need to ensure that some localizable strings are only made of plain-text. E.g. the ",Object(o.b)("inlineCode",{parentName:"li"},"placeholder")," HTML attribute of a text input field.\nFor this, we introduced the ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/fbt/docs/enforcing_plain_text"}),Object(o.b)("inlineCode",{parentName:"a"},"fbs")," API")," to define plain-text strings."),Object(o.b)("li",{parentName:"ol"},Object(o.b)("strong",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"strong"},{href:"/fbt/docs/api_intro/#custom-fbt-api-attributes"}),"Added the ability to expose arbitrary options to the ",Object(o.b)("inlineCode",{parentName:"a"},"<fbt>")," / ",Object(o.b)("inlineCode",{parentName:"a"},"fbt()")," callsites."))," ",Object(o.b)("br",null),"\nIt enables fbt users to customize how ",Object(o.b)("inlineCode",{parentName:"li"},"FbtResult")," objects are generated on the client-side."),Object(o.b)("li",{parentName:"ol"},Object(o.b)("strong",{parentName:"li"},"Support fbt ",Object(o.b)("inlineCode",{parentName:"strong"},"common")," attribute without value"))),Object(o.b)("h2",{id:"acknowledgments"},"Acknowledgments"),Object(o.b)("p",null,"This major release is the fruit of 2+ years of work on my part and was made possible thanks to the help of John Watson (",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/jrwats"}),"@jrwats"),") and Yisong Qin (",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/pkqinys"}),"@pkqinys"),")."),Object(o.b)("p",null,"As the original maintainer of the JS Fbt library, John helped me better understand the string extraction & translation workflow of the original codebase, and was a great sounding board as I was designing the high-level tech solution for this project. He also helped improve the overall developer experience by decoupling more JS Fbt code from the rest of the Meta infra.\nMany thanks also to Yisong Qin - who came onboard in 2021 - to help me push this project to the finish line. He made significant contributions by rewriting important portions of the fbt client-side code generator and the OSS translation payload ingestor; notwithstanding many more things at the Meta-infra level. Although new to node.js programming, he showed the grit necessary to learn it from scratch and had a great impact on the project outcomes."),Object(o.b)("p",null,"\ud83d\udd4a Finally, we hope that you find better value in using this latest release of the JS Fbt library.\nPlease feel free to share any question/feedback by ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/fbt/discussions/356"}),"commenting on this post")," or opening ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/fbt/discussions"}),"new discussion threads on Github.")),Object(o.b)("p",null,"Cheers!"),Object(o.b)("p",null,"David (",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/kayhadrin"}),"@kayhadrin"),")"))}l.isMDXComponent=!0}}]);